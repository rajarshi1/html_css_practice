(function(m){var h=window.AmazonUIPageJS||window.P,p=h._namespace||h.attributeErrors,f=p?p("DetailPageImageBlockAssets"):h;f.guardFatal?f.guardFatal(m)(f,window):f.execute(function(){m(f,window)})})(function(m,h,p){m.register("postMetric",function(){return{postCountMetric:function(f){if("undefined"!==typeof f){var a=h.ue;if(a){var d=a.count(f)||0;a.count(f,d+1)}}},postTimeMetric:function(f,a){if("undefined"!==typeof f&&"undefined"!==typeof a){var d=h.ue;d&&d.count(f,a)}}}});m.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});m.register("postEarlyMetric",function(){return null});m.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(f,a,d,e){f=f.extend(!0,{},d,e);var c=new a(f);m.register("ImageBlockAPI",function(){return c.api});return c});m.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(f,a,d){f=d.airyConfig;f.jsUrl&&m.load.js(f.jsUrl);f.cssUrl&&m.load.css(f.cssUrl)});
m.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(f,a,d,e,c,b){var g={};return function(f){var l=this;l.dispatch=function(b,d){var e=g[b];c.isDefined(e)&&a.each(e,function(a,b){b.call(h,d)})};l.register=function(a,b){c.isDefined(g[a])||(g[a]=[]);"function"===typeof b&&g[a].push(b)};l.model=new d(f,l);l.view=new e(f,l,l.model);l.api=new b(f,l,l.model);l.init=function(){l.model.init();l.view.init()};l.init()}});
m.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(f,a,d){function e(a,b,c,e,g){d.isDefined(a)&&(m.type=a);d.isDefined(b)&&(m.index=b);d.isDefined(c)&&(m.thumbnailIndex=c);d.isDefined(e)&&(m.variant=e);d.isDefined(g)&&(m.color=g)}function c(a){e("image",0,0,"MAIN",a||l.landingAsinColor||l.defaultColor)}function b(a){a=a.data;q=f.copy(m);e(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function g(a){b(a);a=f.copy(a);a.data=f.copy(m);k.dispatch("updateView",a)}function h(){q=
f.copy(m);c(m.color)}var l,k,m={},q={},p,P;return function(a,d){k=d;l=a;k.register("updateSelection",g);k.register("updateModel",b);k.register("resetModel",h);this.init=function(){c()};this.getCurrentItem=function(){return f.copy(m)};this.getPreviousItem=function(){return f.copy(q)};this.setCurrentEvent=function(a){p=a};this.getCurrentEvent=function(){return p};this.setImmersiveViewModalInstance=function(a){P=a};this.getImmersiveViewModalInstance=function(){return P}}});m.when("ImageBlockBTF",
"postMetric").execute(function(f,a){function d(a,b,d,e,f){function k(a){"click"===a.type&&e.postCountMetric("thumbClick");"click"===a.type&&F.overrideAltImageClickAction?x.dispatch("thumbActionClick",a):x.dispatch("updateSelection",a)}function m(a){F.useClickZoom||x.dispatch("imageClick",a)}function q(a){F.useClickZoom||x.dispatch("imageHover",a)}function p(a){x.dispatch("button360Click",a)}function P(b){!d.isDefined(b)||"swatchClick"!==b.type&&"updatedData"!==b.type?(y.update(b),"swatchHover"!==
b.type&&D.getPreviousItem().thumbnailIndex!==b.data.thumbnailIndex&&e.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):y.render(b.data.color,!1,b.onload)}function u(a){x.dispatch("resize",a)}function w(a){d.selectThumbnail(a,v)}function t(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function C(a){var b=D.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=b;return c}var y,F,x,D,v;return function(d,e,g){y=
this;F=d;x=e;D=g;v=b("#imageBlock #altImages ul");var n=b("#imageBlock .canvas"),A=b("#main-image-container"),K;y.subViews=[];for(e=0;e<f.length;e++)y.subViews.push(new f[e](d,g,y,x));y.render=function(a,c,d){var e=0;v.find(".item").remove();a=a||D.getCurrentItem().color;b.each(y.subViews,function(b,g){e=g.render(a,e,n,v,A,c,d)||e});var g=v.find(".a-button-selected").closest(".a-declarative");K=C(g)};y.init=function(){v=b("#imageBlock #altImages ul");var d=v.find(".a-button-selected").closest(".a-declarative"),
e=d.data("action"),d=d.data(e)||{};d.color=F.landingAsinColor||F.defaultColor;x.dispatch("updateModel",{data:d});y.render(d.color,!0);F.isDebug&&h.console&&console.log(F);x.register("updateView",P);x.register("selectThumbnail",w);F.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],k);a.declarative("thumb-action",["click"],k);a.declarative("main-image-click",["click"],m);a.declarative("main-image-click",["mouseenter","mouseleave"],q);a.declarative("button-360-click",
["click"],p);b(h).resize(u)};y.update=function(a){b.each(y.subViews,function(b,c){c.update(a)});F.usePeekHover&&("mouseleave"===a.type?x.dispatch("updateSelection",K):"click"===a.type&&(K=t(a)||K))}}}var e=["A","jQuery","imageBlockUtils","postMetric"].concat(f.views);m.when.apply(m,e).register("ImageBlockView",function(){for(var a=arguments[0],b=arguments[1],e=arguments[2],f=arguments[3],l=[],k=4,h=arguments.length;k<h;k++)l.push(arguments[k]);return d(a,b,e,f,l)})});m.when("A","jQuery",
"imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(f,a,d,e,c,b,g){function h(b,c,e,g){if(!d.isjQueryObjDefined(b.find(".a-button-selected"))){var f=r.getCurrentItem();if(!g||"chromeless-video"!==f.type||!v.autoplayVideo){g=0;"image"===f.type&&(g=Math.max(p(f.color,f.variant),0));var k=c+g;k>=e&&(g=0,k=c);c=d.getImageHash(f.color,g,v);-1!==c&&(J.dispatch("updateModel",{data:{index:g,thumbnailIndex:k,variant:c.variant,
type:"image"}}),c=b.find(".item").get(k),d.selectGivenThumbnail(a(c),b))}}}function l(c,e,f){e=v.colorImages&&v.colorImages[e];var k=c;d.isDefined(e)&&(a.each(e,function(a,b){c<v.maxAlts&&(d.createThumbnail({type:"image",index:a,thumbnailIndex:c,variant:b.variant},b.thumb,I,"imageThumbnail"),c++)}),b.isEnabled&&g.logAltImgRequestPlacedOnThumbnails(a,b,r),h(I,k,c,f));return c}function k(b,c){if("image"===b.type){var d=a("#image-canvas-caption #canvasCaption"),e,g=v.staticStrings,f=v.colorImages,k=
b.color,l=b.index;c&&v.useIV?e=g.clickToExpand:f[k]&&f[k][l].hiRes&&v.useHoverZoom?(e=v.useHoverZoomIpad?g.touchToZoom:v.useClickZoom?g.clickToZoom:g.rollOverToZoom,v.hoverZoomIndicator&&(e="<img src='"+v.staticImages.hoverZoomIcon+"'/>&nbsp;"+e)):v.useIV&&(e=g.clickToExpand);d.html(e)}}function p(a,b){return d.getIndexForVariant(a,b,v)}function q(b,c){var e;a.each(b.main,function(a,b){d.isDefined(e)||(e=parseFloat(b[1]/b[0])<=parseFloat(v.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});
var g="a-dynamic-image "+e,f=d.getMaxDimensionsOfMainImage(b.main,A,v),k=f[0],l=f[1],f=a("<div></div>"),k={"max-height":k,"max-width":l};f.addClass(g).css(k).attr({"data-old-hires":b.hiRes,"data-a-manual-replacement":"true",onload:c}).data("a-dynamic-image",b.main);return f}function O(a){var b=N.find(".swatchHoverExp");a=q(a);b.find(".imgTagWrapper").html(a);f.loadImageManually(a);return b}function P(a){var b=A.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");
v.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(v.imgTagWrapperClasses)}function u(a,e){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var l=d.getImageHash(a.color,a.index,v);if(-1===l)return l={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},d.lazyLoadingRequired(a,r,v)?C(a,!1,e):(J.dispatch("updateModel",l),d.showUnavailable(a.color)),-1;var h=N.find(".item.itemNo"+a.thumbnailIndex);if(!d.isjQueryObjDefined(h)){var h=a.thumbnailIndex,h=N.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+
h+" maintain-height"),n=q(l,e);h.find(".placeHolder").replaceWith(n);N.find(".list").append(h);f.loadImageManually(n)}P(h);J.dispatch("loadMagnifier");k(a);v.useIV&&d.isDefined(l.hiRes)&&h.css("cursor","pointer");a.isUserGenerated&&(h=r.getPreviousItem(),n=a.variant,d.isDefined(n)&&h.thumbnailIndex!==a.thumbnailIndex&&(b.isEnabled&&g.logAltImgRequestServed(b),c.postCountMetric("ImageThumbnailSelectedVariant:"+n),0===n.indexOf("IG")&&(c.postCountMetric("IGImageSelectedVariant:"+n),c.postCountMetric("IGImageSelectedEvent:"+
a.interaction))));f.trigger("dp:image-block:update",l)}}function w(a){var b=Math.max(p(a.color,r.getCurrentItem().variant),0),b=d.getImageHash(a.color,b,v);if(-1===b)return d.lazyLoadingRequired(a,r,v)?d.lazyLoadOnHoverEnabled(v)&&(t(".3",!0),d.spinner(N,!0),f.delay(function(){r.getCurrentEvent().data===a&&C(a,!0)},500)):d.showUnavailable(a.color),-1;var c=O(b);P(c);f.trigger("dp:image-block:update",b)}function t(b,c){c?N.css("opacity",b):a("#imageBlock").css("opacity",b)}function C(a,b,c){K=b;M=
c;var g=a.color,f=v.colorToAsin[g];if(f&&f.asin){var k={};k.params={asin:f.asin,productGroupID:v.productGroupID,color:g};k.success=function(e){e?(d.ajaxState(f.asin,"success"),v.colorImages[g]=e.colorImage,d.isDefined(v.spin360ColorEnabled)&&(v.spin360ColorEnabled[g]=e.enable360),g===a.color&&(b&&K?a===r.getCurrentEvent().data&&(y(a),w(a)):(e={type:"updatedData",data:r.getCurrentItem(),onload:c||M},J.dispatch("updateView",e))),m.register(d.rankedImagesReadyEvent(f.asin))):d.ajaxState(f.asin,"fail")};
k.error=function(){d.ajaxState(f.asin,"fail")};k.indicator=d.spinner(N);d.ajaxState(f.asin,void 0)&&"fail"!==d.ajaxState(f.asin,void 0)||(t(".3",b),e.load("/gp/product/features/apparel-main-image/ranked-images.html",k),d.ajaxState(f.asin,"sent"));return v.colorImages&&v.colorImages[g]}}function y(b,c){d.lazyLoadingRequired(b,r,v)||(a("#imageBlock").css("opacity","1"),N.css("opacity","1"),d.spinner(N,!1),N.find("li").removeClass("selected"),a("#image-canvas-caption #canvasCaption").empty(),d.hideUnavailable(),
c&&N.find(".list .item").remove())}function F(){var b=N.find(".item .imgTagWrapper"),c=d.getContainerHeight(A,v.holderRatio,v.holderMaxHeight);0<c&&(A.height(c),b.height(c));N.find("img.a-dynamic-image").each(function(){var b=a(this);b.data("a-manual-replacement")&&f.loadDynamicImage(this);var c=b.data("a-dynamic-image"),c=d.getMaxDimensionsOfMainImage(c,A,v);b.css({"max-height":c[0]+"px","max-width":c[1]+"px"})})}function x(a){k(r.getCurrentItem(),"mouseenter"===a.type)}var D,v,r,J,I,N,A,K,M,B;return function(a,
b,e,g){D=this;v=a;r=b;J=g;v.colorImages[v.landingAsinColor]=v.colorImages[v.defaultColor];D.render=function(a,b,c,e,g,f,k){N=c;I=e;A=g;B=l(b,a,f);f||(a=r.getCurrentItem(),d.lazyLoadingRequired(a,r,v)&&J.dispatch("updateModel",{data:{type:"lazy-loaded"}}));y(r.getCurrentItem(),!f);u(r.getCurrentItem(),k);return B};D.update=function(a){var b=a.data;r.setCurrentEvent(a);"ingress"!==b.type&&y(a.data,!1);"swatchHover"===a.type?b.color===r.getCurrentItem().color?u(r.getCurrentItem()):a.captured||-1===w(b)||
(a.captured=!0):"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,"mouseenter"===a.type&&c.postCountMetric("dpcc_imageThumbHovered_"+(b.thumbnailIndex+1)+"_"+B),u(b),v.usePeekHover&&"click"!==a.type||(d.selectGivenThumbnail(a.$declarativeParent,I),"click"===a.type&&c.postCountMetric("dpcc_imageThumbClicked_"+(b.thumbnailIndex+1)+"_"+B)))};J.register("imageHover",x);J.register("resize",F)}});m.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",
function(f,a,d,e,c,b){function g(a){t?a.css("cursor","url('"+q.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function n(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(d.isDefined(b))for(var b=b[1].split("_"),c=0;c<b.length;c++){var e=b[c].match(/^([A-Z]+)(\d+(\.\d+)?)$/);d.isDefined(e)&&(a[e[1]]=parseInt(e[2],10))}return a}function l(f,k){function l(){var a;k.useClickZoom?(a=k.offsetInClickZoom,a=[Math.min(1,
Math.max(0,M[0]-(R[0]+a))/(R[2]-2*a)),Math.min(1,Math.max(0,M[1]-(R[1]+a))/(R[3]-2*a))]):a=K&&K.updatePosition();if(a&&A&&A.detailSize){var b=[A.detailSize[0]-A.rect.width,A.detailSize[1]-A.rect.height];A.detailImage.get(0).style.left=-(a[0]*b[0])+"px";A.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function m(a){var b=S?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";M=S?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function p(a){S&&a.preventDefault();m(a);k.useClickZoom?a=[R[0],R[1],R[0]+
R[2],R[1]+R[3]]:(a=K?K.offset:f.offsetParent().offset(),a=[B[0]+a.left,B[1]+a.top,B[0]+B[2]+a.left,B[1]+B[3]+a.top]);M[0]<a[0]||M[1]<a[1]||M[0]>=a[2]||M[1]>=a[3]?(k.fadeMagnifier?ea||(ea=!0,ma=setTimeout(function(){z(!0)},500)):k.useClickZoom||z(),la&&(la=!1,clearTimeout(ka))):(la||(la=!0,ka=setTimeout(function(){e.postCountMetric("dppc_hoverZoomOpened");c.isEnabled&&b.logHoverZoomRequestServed(c)},1E3)),k.fadeMagnifier&&ea&&(ea=!1,clearTimeout(ma)),l())}function z(b){b&&w.suppressMagnifier(!0);if(P&&
(A&&A.hide(),K&&(K.destroy(),K=null),P=!1,S?(f.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),u(),b))f.one("click.magnifier touchstart.magnifier",function(a){r(a,!0)})}function r(b,c){c&&w.suppressMagnifier(!1);if(!P&&!T&&(0===Y&&(e.postCountMetric("dppc_hoverTime",new Date-(h.ue&&h.ue.t0||0)),Y=1),Z[W]||(e.postCountMetric("dppc_hoverMain"),Z[W]=1),B=[f.position().left,
f.position().top,f.width(),f.height()],W&&(m(b),A?A.refit().show():A=new ja,k.useClickZoom||(K=K||new aa),R=A.getWindowSize(),l()),P=!0,S?(f.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",p).bind("touchend.magnifier",z),a(document).trigger("engaged.magnifier")):(f.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",p)),c)){var d=a("#zoomWindow");if(0<d.length)d.one("click.magnifier touchend.magnifier",function(a){z(!0)})}}
function u(){k.useHoverZoom&&(S?f.bind("touchstart.magnifier touchmove.magnifier",r):f.bind("mousemove.magnifier",r))}var w=this,O={detailImageUrl:f.attr("data-old-hires"),location:"over",locationElement:f,prelaod:"ready",zIndex:50,offsetInClickZoom:50};k=a.extend(O,k);k.adjustment=[10,0,-10,0];var A=null,K=null,M=null,B=null,R=null,L={"null":1,"":1,undefined:1},P=!1,T=!1,W=k.detailImageUrl,S=k.useHoverZoomIpad||0,Y=0,Z={},aa=function(){function b(a){var c=Math.round(Math.min(f.width(),A.rect.width/
a));a=Math.round(Math.min(f.height(),A.rect.height/a));h.css({width:c,height:a});d=[c,a]}var c=this,d=[0,0],e=(A.detailSize&&A.detailSize[0]||5E8)/B[2],l=(A.detailSize&&A.detailSize[1]||5E8)/B[3],e=l>e?l:e;a("#magnifierLens").remove();var h=a("<div id='magnifierLens' />").css({backgroundImage:"url("+k.generalImageUrls.zoomLensBackground+")",position:"absolute"});q.showMagnifierOnHover?g(h):h.css("cursor","pointer");c.updatePosition=function(){var a=[B[2]-d[0],B[3]-d[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,
(M[0]-d[0]/2-B[0]-c.offset.left)/a[0])),e=0>=a[1]?.5:Math.max(0,Math.min(1,(M[1]-d[1]/2-B[1]-c.offset.top)/a[1])),g=B[0]+Math.round(b*a[0]),a=B[1]+Math.round(e*a[1]);h.get(0).style.left=g+"px";h.get(0).style.top=a+"px";return[b,e]};c.destroy=function(){h.remove()};c.offset=f.offsetParent().offset();b(e);c.updatePosition();h.appendTo(f.parent());A.detailImage[0].complete||A.detailImage.load(function(){var a=A.detailImage.width()/B[2];b(a);c.updatePosition()})};aa.preload=function(){w.preload(k.generalImageUrls.lensBackgroundUrl)};
var ja=function(){function b(){var c={};if("over"===k.location){var c=k.useClickZoom,l={},n=a("#leftCol"),m=a("#centerCol"),p=a("#rightCol"),z=a("#hover-zoom-end"),r=a("#actionPanelContainer"),A=d.isjQueryObjDefined(n)?n.outerHeight():m.outerHeight();l.top=d.isjQueryObjDefined(n)?n.offset().top:m.offset().top;l.bottom=A+l.top;l.right=d.isjQueryObjDefined(p)?p.offset().left:r.offset().left;l.left=c?0:n.offset().left+n.outerWidth();d.isjQueryObjDefined(z)&&z.offset().top>l.bottom&&(l.bottom=z.offset().top);
c=l}else"right"===k.location&&(c=f.offset(),c={left:c.left+f.outerWidth(),top:c.top,right:c.left+f.outerWidth()+400,bottom:c.top+400});k.minHeightElement&&(c.bottom=Math.max(c.bottom,c.top+a(k.minHeightElement).outerHeight()));c.bottom=Math.min(c.bottom,a(h).scrollTop()+a(h).height());c.left+=g[0];c.top+=g[1];c.right+=g[2];c.bottom+=g[3];c.width=c.right-c.left;c.height=c.bottom-c.top;k.enhancedHoverOverlay&&d.isDefined(h.pageXOffset)&&(l=a(h).width(),c.width=l-c.left+h.pageXOffset-18,c.height-=14);
q.css({left:c.left,top:c.top,width:c.width,height:c.height});e.rect=c;return e}function c(a){var b=new Image;e.detailSize=[0,0];b.onload=function(){e.detailSize=[b.width,b.height];l()};b.src=a.attr("src");if(0<b.width&&0<b.height)e.detailSize=[b.width,b.height];else if(k.detailImageSize)e.detailSize=k.detailImageSize;else{a=n(b.src);var d=B[2]/B[3];a.SS||a.AA?(a=a.SS||a.AA,e.detailSize=[a,a]):a.SX?e.detailSize=[a.SX,Math.round(a.SX/d)]:a.SY?e.detailSize=[Math.round(a.SY*d),a.SY]:a.SL&&(e.detailSize=
1<=d?[a.SL,Math.round(a.SL/d)]:[Math.round(a.SL*d),a.SL])}}var e=this,g=k.adjustment;a("#zoomWindow").remove();var m={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:k.zIndex};k.enhancedHoverOverlay&&(m.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",m.border="1px solid #949494",m.borderColor="rgb(148,148,148)");var q=a("<div id='zoomWindow' />").css(m);k.fadeMagnifier&&q.fadeIn(200);k.useClickZoom&&(t?q.css("cursor",'url("'+k.zoomOutIcon+'"), auto'):(q.css("cursor","-webkit-zoom-out"),
q.css("cursor","-moz-zoom-out"),q.css("cursor","zoom-out")));e.updateImage=function(b){b=a("<img id='detailImg' src='"+b+"'/>").css("position","absolute");e.detailImage&&e.detailImage.remove();q.append(b);a(document).trigger("updated.magnifier");e.detailImage=b;c(e.detailImage)};e.refit=function(){b();c(e.detailImage);return e};k.fadeMagnifier?(e.show=function(){q.fadeIn(200);return e},e.hide=function(){q.fadeOut(200);return e}):(e.show=function(){q.show();return e},e.hide=function(){q.hide();return e});
e.destroy=function(){q.remove();return e};e.getWindowSize=function(){return[e.rect.left,e.rect.top,e.rect.width,e.rect.height]};e.updateImage(W);b();q.appendTo(document.body)},ea=!1,ma,la=!1,ka;w.preload=function(b){b=a.makeArray(b);for(var c=b.length,d=0;d<c;d++)b[d]instanceof Array?w.preload(b[d]):"string"===typeof b[d]&&b[d]&&!L[b[d]]&&(L[b[d]]=new Image,L[b[d]].src=b[d])};w.changeImage=function(b,c){P&&z();W=c;f.attr("src",b);w.preload(b);B=[f.position().left,f.position().top,f.width(),f.height()];
c&&("immediately"===k.preload?w.preload(c,!0):a(h).ready(function(){w.preload(c)}),A?A.updateImage(c):f.attr("data-old-hires",c))};w.destroy=function(){f.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");K&&K.destroy();K=null;A&&A.destroy();A=null};w.detailImage=function(){return A.detailImage};w.suppressMagnifier=function(a){T=a};w.isEngaged=function(){return P};w.engageMagnifier=r;w.disengageMagnifier=z;f[0].complete?u():
f.one("load",u);w.preload(f.attr("src"));if(k.preload){var da=k.detailImageUrl,O=function(){w.preload(da,!0);k.useClickZoom||aa.preload()},ca=k.preload;ca.constructor!==Array&&(ca=[ca]);for(var X=0;X<ca.length;X++)if("immediately"===ca[X])O();else if(a(h)[ca[X]])a(h)[ca[X]](O);else a(h).bind(ca[X],O)}return w}function k(){if(q.useHoverZoom){var e={adjustment:[0,0,1,1],generalImageUrls:q.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:q.useHoverZoomIpad,
useHoverZoom:q.useHoverZoom,useClickZoom:q.useClickZoom,fadeMagnifier:q.fadeMagnifier,zoomOutIcon:q.staticImages.zoomOutCur,enhancedHoverOverlay:q.enhancedHoverOverlay||q.atfEnhancedHoverOverlay};u&&(u.destroy(),u=p);var g=w.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");d.isjQueryObjDefined(g)?q.useClickZoom?(g.one("click.loadmagnifier touchstart.loadmagnifier",function(a){u=new l(g,e);u.engageMagnifier(a,!0)}),t?g.css("cursor",'url("'+q.staticImages.zoomInCur+'"), auto'):
(g.css("cursor","-webkit-zoom-in"),g.css("cursor","-moz-zoom-in"),g.css("cursor","zoom-in"))):u=new l(g,e):c.isEnabled&&b.logHoverZoomApplicability(a,c)}}var m,q,O,P,u,w,t=navigator.userAgent.match(/msie|trident/i);return function(a,b,d,e){m=this;q=a;O=b;c.refToModel=O;P=e;m.render=function(a,b,c,d,e,g){w=c;u&&(u.destroy(),u=p)};m.update=function(a){};P.register("loadMagnifier",k);P.register("resize",k)}});m.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",
function(f,a,d,e){function c(a,b,c){a=(a=c?c:d.getColorFromState(b.getState().hovered_variations,h))&&""!==a?a:h.defaultColor;k.dispatch("updateView",{type:"swatchHover",data:{color:a}});e.postCountMetric("swatchHover")}function b(a,b,c,g){a=(a=g?g:d.getColorFromState(b.getState().selected_variations,h))&&""!==a?a:h.defaultColor;a===l.getCurrentItem().color?"function"===typeof c&&c():(k.dispatch("updateSelection",{type:"swatchClick",data:{color:a},onload:c}),e.postCountMetric("swatchClick"))}var g,
h,l,k;return function(a,d,e,m){g=this;h=a;l=d;k=m;f.on("image-block-twister-swatch-hover",c);f.on("image-block-twister-swatch-click",b);g.render=function(a,b,c,d,e){};g.update=function(a){}}});m.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(f,a,d,e,c,b){function g(b,c,d,g){!t.autoplayVideo||M||t.useChromelessVideoPlayer?!e.isjQueryObjDefined(b.find(".a-button-selected"))&&!e.productReelExperimentEnabled(t)&&(d=C.getCurrentItem(),
!g||t.prioritizeVideos||"chromeless-video"===d.type&&t.autoplayVideo)&&(g=e.getVideoHash(d.color,0,t),-1!==g&&(c+=0,y.dispatch("updateModel",{data:{index:0,thumbnailIndex:c,variant:g.variant,type:t.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),c=b.find(".item").get(c),e.selectGivenThumbnail(a(c),b))):(e.selectGivenThumbnail(b.find("img:last"),b),e.fadeToThumbnail(b.find("img").length-1,v,b))}function h(a){var b=C.getCurrentItem().color;if(t.useChildVideos&&!t.colorToVideo[b]){var c=
function(){if(a){t.colorToVideo[b]=a;var c={type:"updatedData",data:C.getCurrentItem()};y.dispatch("updateView",c)}};t.lazyLoadExperienceDisabled?c():m.when(e.rankedImagesReadyEvent(t.colorToAsin[b].asin)).execute(function(){c()})}}function l(a){if(!t.useChildVideos)return e.lazyLoadingRequired(C.getCurrentItem(),C,t)?void 0:t.videos;if(t.colorToVideo[a])return t.colorToVideo[a];var b=t.colorToAsin[a];if(b&&b.asin){var d={};d.params={asin:b.asin,productGroupID:t.productGroupID,useAiryVideoPlayer:!0,
useChromelessVideoPlayer:t.useChromelessVideoPlayer,isUDP:t.isUDP};t.isDPXFeatureEnabled||(d.success=function(a){h(a)},c.load("/gp/product/features/apparel-main-image/videos.html",d));return t.colorToVideo&&t.colorToVideo[a]}}function k(){y.dispatch("selectThumbnail",e.productReelExperimentEnabled(t)?1:0)}function p(c,g,f,l){return d.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:c[0],streamingUrls:g.url,swfUrl:f.swfUrl,foresterMetadataParams:f.foresterMetadataParams,backgroundColor:"transparent",
flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=e.isjQueryObjDefined(c.find("video"))?"HTML5":"FLASH";b.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){c.parent().css("z-index",8)},videounsupported:function(){k();b.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){k();b.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){J.seek(0)}},cuePoints:[{values:g.durationSeconds-1,type:"position",
callback:function(b,d,e){b=e.durationSeconds-e.playheadTimeSeconds;c.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*b,.1,function(){c.parent().css({"background-color":"transparent","z-index":-1});k();a(this).show().css("opacity",1)})}}]})}function q(b){if("chromeful-video"===b.type||"chromeless-video"===b.type){var c=e.getVideoHash(b.color,b.index,t);if(-1===c)return-1;if("chromeful-video"===b.type){b=v.width()/v.height();var d=parseInt(c.videoWidth,10),g=parseInt(c.videoHeight,
10);e.updateAspectRatio(b,d,g,x);J?(J.show(),e.loadMediaIntoAiry(J,c,I)):J=e.createAiryInstanceForChromeful(x,c,I,null,t.autoplayVideo,v,D,F);b:if(e.productReelExperimentEnabled(t)){if(1<e.getVideosCount(C.getCurrentItem().color,t)){if(e.isDefined(r)){D.show();break b}r=a('<a class="more-videos"></a>').attr("href","#").text(t.staticStrings.watchMoreVideos);D.find("#videoCaption").append(r);f.declarative.create(r,"videoIngressClick",N)}e.playVideoInImmersiveView(t,C.getCurrentItem().color)&&(f.declarative.create(x,
"videoIngressClick",N),x.children().css("z-index","-1"),x.css("display","inline-block"))}else D.find("#videoCaption").text(t.staticStrings.playVideo),D.show();c=J;t.autoplayVideo&&c&&!M&&(e.toggleVideoCaption(D),c.setVolume(0),c.show(),c.play(),M=!0)}else J?(J.show(),e.loadMediaIntoAiry(J,c,I),J.play(),D.show()):(J=p(x,c,I))&&J.play()}}function O(c,d,f){var k=l(d);d=c;e.isDefined(k)&&0<k.length&&t.alwaysIncludeVideo&&c===t.maxAlts&&(F.find(".item:last").remove(),c--);e.isDefined(k)&&(a.each(k,function(a,
d){if(c<t.maxAlts){var g=t.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",f={type:g,index:a,thumbnailIndex:c,variant:d.variant};N={type:"video-ingress",index:a,thumbnailIndex:c,variant:d.variant};e.productReelExperimentEnabled(t)&&("chromeful-video"===g&&(B+=" videoBlockIngress",e.productReelDarkIngressEnabled(t)&&(B+=" videoBlockDarkIngress",d.thumb=d.thumb.replace("_PKmb-play-button-overlay-thumb",""))),t.altsOnLeft||(B+=" a-align-top"));e.createThumbnail(f,d.thumb,F,B);if(e.productReelExperimentEnabled(t)){P(F.find(".videoBlockIngress img"),
t.videoIngressATFSlateThumbURL);var f=1<k.length?"multiple-videos":"one-video",l=1<k.length?k.length+" "+t.staticStrings.multipleVideos:t.staticStrings.singleVideo;l&&F.find(".videoBlockIngress").append(F.find("#videoCount_template").clone().text(l).attr("id","videoCount")).addClass(f)}K||(K=!0,b.postCountMetric("chromeless-video"===g?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));c++}if(e.productReelExperimentEnabled(t))return!1}),g(F,d,c,f));return c}function P(a,b){var c=a.attr("src");
if(c&&b){a.attr("src",b);var d=new Image;d.onload=function(b){a.attr("src",c)};d.src=c}}function u(a){J&&J.pause();a.data=N;a.clickTimeStamp=a.$event.timeStamp;var c="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";y.dispatch("imageClick",a);b.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);b.postCountMetric(c)}var w,t,C,y,F,x,D,v,r,J,I,N,A,K=!1,M=!1,B="videoThumbnail";return function(c,d,g,k){w=this;t=c;C=d;y=k;I=t.airyConfig;t.colorToVideo={};t.colorToVideo[t.landingAsinColor]=
t.colorToVideo[t.defaultColor]=t.videos;w.render=function(b,c,d,g,k,l){F=g;x=k.find("#main-video-container");D=x.parent().find("#video-canvas-caption");v=a("#main-image-container");t.useChromelessVideoPlayer||x.addClass("chromeful-container");A=O(c,b,l);q(C.getCurrentItem());e.productReelExperimentEnabled(t)&&f.declarative("videoIngressClick",["click"],u);return A};w.update=function(a){var c=a.data;"ingress"!==c.type&&J&&(J.hide(),x.parent().css("z-index",-1),D.hide());if("swatchHover"===a.type)c.color===
C.getCurrentItem().color?q(C.getCurrentItem()):a.captured||e.lazyLoadingRequired(c,C,t)&&!e.lazyLoadOnHoverEnabled(t)&&q(C.getCurrentItem());else if("chromeful-video"===c.type||"chromeless-video"===c.type)"mouseenter"===a.type&&b.postCountMetric("dpcc_videoThumbHovered_"+(c.thumbnailIndex+1)+"_"+A),q(c),t.usePeekHover&&"click"!==a.type||(e.selectGivenThumbnail(a.$declarativeParent,F),"click"===a.type&&e.productReelDarkIngressEnabled(t)&&(b.postCountMetric("dpcc_videoThumbClicked_"+(c.thumbnailIndex+
1)+"_"+A),N.action="videoIngressClick",N.clickTimeStamp=a.$event.timeStamp,y.dispatch("videoIngressClick",N),b.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp)))};if(t.isDPXFeatureEnabled)f.on("triggerVideoAjax",h)}});m.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(f,a,d,e,c,b,g,n,l,k){function m(a){return a.hiRes||
a.large||a.main[a.main.length-1]}function q(){H.find("#ivTitle").click(function(){qa.hide()})}function O(a){if(c.productReelExperimentEnabled(Q)){var b=H.find("#ivMediaSelect");b.find("option[value='"+a+"']").attr("selected",!0);b.trigger("change")}}function P(){V=Xa?{type:"360-spin"}:sa.getCurrentItem()}function u(){var a=H.find("#ivStage"),b=qa.$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-k.getDimension(c,"padding-top")-k.getDimension(c,"padding-bottom");H.css("height",
b);var c=H.find("#ivTitle").outerHeight(!0),d=H.find("#ivVariationSelection").outerHeight(!0),e=H.find("#ivMediaSelection").outerHeight(!0),g=H.find("#ivThumbs"),f=k.getDimension(g,"margin-top")+k.getDimension(g,"margin-bottom");g.css("height",b-c-d-e-f);H.find("#ivLargeImage").css("height",b);a.css("width",H.width()-k.getDimension(H,"padding-left")-k.getDimension(H,"padding-right")-H.find("#ivThumbColumn").width()-k.getDimension(a,"margin-left")-k.getDimension(a,"margin-right"))}function w(){H.find("#ivMediaSelect").change(function(){var a=
e(this).val();"all"===a?(H.find("#ivVideoList").hide(),H.find("#ivThumbs").show(),H.find(".ivThumbVideo").show(),"chromeful-video"===V.type&&H.find("#ivVideo_"+V.index).click()):"images"===a?(H.find("#ivVideoList").hide(),H.find("#ivThumbs").show(),H.find(".ivThumbVideo").hide(),"chromeful-video"===V.type&&(0===ga&&0===E?H.find("#iv360").click():0===ga?H.find("#ivHeroImage_0").click():H.find("#ivImage_0").click())):"videos"===a&&(H.find("#ivVideoList").show(),H.find("#ivThumbs").hide(),"chromeful-video"!==
V.type?H.find("#ivVideoList_0").click():H.find("#ivVideoList_"+V.index).click())})}function t(){var a=H.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),g=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(g=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,g=0===g?1:g,f=Math.min(b/e,c/g),k=g*f,l=e*f;1>f?(Oa?a.css("cursor","url('"+Q.staticImages.zoomIn+"'), auto"):(a.css("cursor",
"-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),pa=!0):pa=!1;e=Math.min(l,e);g=Math.min(k-20,g);d.css({"margin-top":(c-g)/2,"margin-left":(b-e)/2,height:g,width:e});a.css("visibility","visible");Da=!1}function C(a){var b=H.find("#ivLargeImage");b.css("visibility","hidden");b.empty();k.animateStageIn(b);b.append(a);t()}function y(){ia&&ia.pause();H.find("#ivLarge360").css("display","none");H.find("#ivLargeVideo").css("display","none");H.find("#ivLargeImage").css("display",
"none");I()}function F(a){y();H.find("#ivLargeImage").css("display","block");var b;"hero-image"===a?c.isDefined(ua)&&(b=m(ua[V.index])):c.isDefined(ra)&&(b=m(ra[V.index]));if(c.isDefined(b)){H.find(".fullscreen").remove();var d=e("<img>").attr("src",b).addClass("fullscreen"),g=H.find("#ivLargeImage");k.animateStageOut(g,function(){d.load(function(){C(d)});if(d[0].complete)C(d);else{g.empty();var a=(g.height()-104)/2,b=(g.width()-80)/2;e("<img>").attr("src",Q.staticImages.spinner).css({position:"relative",
top:a+"px",left:b+"px"}).appendTo(g)}})}}function x(){var a=parseInt(V.index,10)+1;a>=ba.length||H.find("#ivVideo_"+a).click()}function D(){var a;c.isDefined(ba)&&(a=ba[V.index]);if(c.isDefined(a)){y();var b=H.find("#ivLargeVideo").css("display","block");ia?(ia.isDetached()&&ia.attach(b[0]),c.loadMediaIntoAiry(ia,a,Ea),ia.show()):(ia=c.createAiryInstanceForChromeful(b,a,Ea,"ImmersiveView"),Ea.enableContinuousPlay&&ia.bind("ended",x));ia.play({isAsync:!0})}}function v(){P();var a;"hero-image"===V.type?
a=H.find("#ivHeroImage_"+V.index):"image"===V.type?(a=H.find("#ivImage_"+V.index),O("all")):"chromeful-video"===V.type||"chromeless-video"===V.type?(a=H.find("#ivVideo_"+V.index),O("videos")):a="360-spin"===V.type?H.find("#iv360"):c.isDefined(ua)?H.find("#ivHeroImage_"+V.index):H.find("#ivImage_"+V.index);c.isjQueryObjDefined(a)||(a=H.find("#ivImage_0"));r(a)}function r(a){H.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(V.type="chromeful-video",V.index=
a.attr("id").split("_")[1],D()):a.hasClass("ivHeroImage")?(V.type="hero-image",V.index=a.attr("id").split("_")[1],F(V.type)):a.hasClass("iv360Image")?(V.type="360-spin",V.index=0,J()):(V.type="image",V.index=a.attr("id").split("_")[1],F(V.type))}function J(){y();H.find("#ivLarge360").css("display","block");B();var a=H.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});k.animateStageIn(a)},200);A();g.postCountMetric("dppc_click360");va=Date.now()}function I(){0<va&&(N("dppc_duration360",
Date.now()-va),va=0)}function N(a,b){h.ue&&h.ue.count(a,b)}function A(){if(0<wa){var a=H.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function K(a,b){if(wa<a.length){var c=e("<img />").css({display:"block",width:6*ta+"px",height:oa+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(wa++,1===wa&&(A(),0<va&&N("dppc_loadTime360",Date.now()-va)),0<za&&N("dppc_perSpriteloadTime360",Date.now()-za),H.find("#iv360Spinner").hide(),
c.show(),xa=5*fa.imageLocations[Math.floor(Ia/fa.imageLocations[0].length)][Ia%fa.imageLocations[0].length],K(a,b))};c.attr("src",a[wa].replace(/(\._SP)\d+(,)\d+/,"$1"+ya+"$2"+Aa));za=Date.now()}}function M(a){if(c.isDefined(fa.spriteWidthSizes)&&0<fa.spriteWidthSizes.length){var b=fa.spriteWidthSizes,d=b.length,e=b[0],g=b[d-1];if(a<=e)return e;if(a>g)return g;for(e=0;e<d;e++)if(a>b[e]&&a<=b[e+1])return b[e+1]}else return a}function B(){var a=H.find("#ivLarge360");a.children("#image-360-sprites").length||
(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),e("<img>").attr("src",Q.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),Fa=!0,R())}function R(){if(c.isDefined(fa.spriteURLs)&&
c.isDefined(H)&&Fa&&!Ja){var a=H.find("#ivLarge360"),b=e("<div>").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});c.isDefined(fa.staticImages.hint360)&&e("<img>").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",fa.staticImages.hint360).appendTo(b);e("<div>").css({"text-align":"center"}).text(Q.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);var b=fa.imageWidth,d=fa.imageHeight,g=a.parent().width(),f=a.parent().height(),
k=0,l=0;b/d>g/f?(ya=M(g),Aa=Math.round(d/b*ya),ta=Math.ceil(g),oa=Math.ceil(Aa/ya*g),l=(f-oa)/2):(Aa=M(f),ya=Math.round(b/d*Aa),oa=Math.ceil(f),ta=Math.ceil(ya/Aa*f),k=(g-ta)/2);a.css({"margin-left":k,"margin-top":l,width:ta+"px",height:oa+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*ta+"px");K(fa.spriteURLs,H.find("#image-360-sprites"),0);b=H.find("#ivLarge360");b.bind("mousedown",W);b.bind("touchstart",L);b.bind("touchmove",U);b.bind("touchend",T);
e(document).bind("mousemove",S);e(document).bind("mouseup",Y);c.isDefined(Q.staticImages.grab)&&a.css("cursor","url('"+Q.staticImages.grab+"'), auto");Ja=!0}}function L(a){Ma=!0;Ga=a.originalEvent.targetTouches[0].clientX}function U(a){Ma&&(Z(a.originalEvent.targetTouches[0].clientX-Ga),Ga=a.originalEvent.targetTouches[0].clientX)}function T(a){Ma&&(Ma=!1)}function W(a){Ha=!0;Sa=a.originalEvent.clientX;c.isDefined(Q.staticImages.grabbing)&&(a=H.find("#ivLarge360"),a.css("cursor","url('"+Q.staticImages.grabbing+
"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+Q.staticImages.grabbing+"'), auto"));return!1}function S(a){Ha&&(Z(a.originalEvent.clientX-Sa),Sa=a.originalEvent.clientX)}function Y(a){Ha&&(Ha=!1,c.isDefined(Q.staticImages.grab)&&(a=H.find("#ivLarge360"),a.css("cursor","url('"+Q.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function Z(a){for(a=xa-=a/ta*180;0>a;)a+=360;for(;360<a;)a-=360;xa=a;var b;a=360;for(var d=0;d<wa;d++)for(var e=0;e<
fa.imageLocations[d].length;e++){var g=Math.abs(xa-5*fa.imageLocations[d][e]);g<a&&(a=g,b=d*fa.imageLocations[0].length+e)}b!==Ia&&(a=Math.floor(b/fa.imageLocations[0].length),a!==Math.floor(Ia/fa.imageLocations[0].length)&&(c.isDefined(Ra)||(Ra=document.createElement("canvas").getContext("2d")),d=H.find("#image-360-sprites").children(),Ra.drawImage(d[a],0,0)),a=H.find(".iv360Hint").not(".iv360HintFaded"),c.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));Ia=b;a=b%fa.imageLocations[0].length*
-1*ta;b=-1*Math.floor(b/fa.imageLocations[0].length)*oa;d=H.find("#ivLarge360").children("#image-360-sprites");d.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");d.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function aa(){H.delegate(".ivThumb","click",function(){var a=e(this);r(a)});H.delegate(".ivThumbVideoListOuter","click",function(){H.find(".ivThumbVideoListOuter").removeClass("selected");var a=e(this);a.addClass("selected");V.type="chromeful-video";V.index=a.attr("id").split("_")[1];
D()})}function ja(){ia&&!ia.isDetached()&&(Ea.volume=ia.getVolume(),ia.detach(),!document.all||h.atob||document.addEventListener||(ia=null));H.find("#ivLargeImage").empty();I()}function ea(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function ma(a){var b=Ba.top-(a.pageY-Ca[1])*Wa;a=ea(Ba.left-(a.pageX-Ca[0])*Wa,Qa.left);b=ea(b,Qa.top);H.find(".fullscreen").css({left:a,top:b})}function la(){H.delegate("#ivLargeImage","click",function(a){if(Da)t();else if(pa){H.find(".fullscreen").removeAttr("style");
if(pa){var b=H.find("#ivLargeImage"),c=b.find(".fullscreen");Oa?b.css("cursor","url('"+Q.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Da=!0;var d=H.find("#ivLargeImage");Qa.left=d.width()-c.width();Qa.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;Ca=[b.offset().left+e,b.offset().top+d];Ba.top=d-c.height()/2;Ba.left=e-c.width()/2;c.css({position:"relative",left:Ba.left,top:Ba.top});Wa=Math.max(c.height()/
b.height(),c.width()/b.width())}ma(a)}});H.delegate("#ivLargeImage","mousemove",function(a){Da&&ma(a)})}function ka(b){if(c.isImmersiveViewEnabled(Q,sa.getCurrentItem().color)){Xa=c.isDefined(b)&&"button-360-click"===b.action;n.isEnabled&&l.logImmersiveViewRequestServed(n);g.postCountMetric("dppc_immersiveViewOpened");if(c.isDefined(qa))qa.show();else{b=e("#auiImmersiveViewDiv");var d=e(h).height()-150,m=e(h).width()-75;qa=a.create(b,{name:"immersiveView",activate:"onclick",width:m,height:d,popoverLabel:"ImmersiveView",
hideHeader:!0});b.click()}if(La){H=e("#ivMain");b=sa.getCurrentItem().color;ra=Q.colorImages[b];ua=Q.heroImage[b];ba=Q.useChildVideos?Q.colorToVideo[b]:Q.videos;Pa=ca()&&Q.spin360ColorEnabled[b];fa=ca()?Q.spin360ColorData[b]:p;P();G=E=na=ga=0;c.isDefined(ua)&&(E=ua.length);c.isDefined(ra)&&(ga=ra.length);c.isDefined(ba)&&(na=ba.length);Pa&&(G=1);k.populateTitle(H.find("#ivTitle"),45,Q);k.populateVariationSelection(H.find("#ivVariationSelection"));b=H.find("#ivMediaSelect");0===ga+G||0===na?(b.parent().hide(),
H.find("#ivThumbs").addClass("noMediaSelection")):(b.empty(),e("<option/>").attr("value","all").prop("selected",!0).text(Q.staticStrings.allMedia+" ("+(E+ga+G+na)+")").appendTo(b),e("<option/>").attr("value","images").text(Q.staticStrings.images+" ("+(E+ga+G)+")").appendTo(b),e("<option/>").attr("value","videos").text(Q.staticStrings.videos+" ("+na+")").appendTo(b),b.parent().show(),b.val("all"));b=H.find("#ivThumbs");b.find(".ivRow").not(".placeholder").remove();for(var d=E+ga+na+G,q=m=0;m<d;)for(var z=
b.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(b),r=0;3>r&&m<d;r++,m++,q++)if(q<E){var A=ua[m].thumb,t=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+m).appendTo(z);t.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(A)+'") center no-repeat')}else if(q>=E&&q<ga+E)A=ra[m-E].thumb,t=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(m-E)).appendTo(z),
t.find(".ivThumbImage").css("background",'url("'+k.getResizedThumbnailURL(A)+'") center no-repeat');else if(q>=E+ga&&q<ga+E+G)t=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(z),t.find(".ivThumbImage").css("background",'url("'+(c.isDefined(Q.staticImages.icon360)?k.getResizedThumbnailURL(Q.staticImages.icon360,!0):"")+'") center no-repeat');else if(A=ba[m-ga-E-G],t=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(m-ga-E-G)).appendTo(z),t.find(".ivThumbImage").css("background",'url("'+A.thumbUrl+'") center no-repeat'),c.isDefined(A)){var u={position:"triggerTop"},x=H.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");x.find(".ivVideoPopoverTitle").text(A.title);x.find(".ivVideoPopoverDuration").text(A.durationTimestamp);u.inlineContent=x[0];f.declarative.create(t,"a-tooltip",u)}b=H.find("#ivVideoList");b.find(".ivThumbVideoListOuter").not(".placeholder").remove();
d=b.find(".placeholder");for(m=0;m<na;m++)q=ba[m],z=d.clone().removeClass("placeholder").appendTo(b),z.attr("id","ivVideoList_"+m),z.find(".ivThumbImage").css("background",'url("'+q.thumbUrl+'") center no-repeat'),z.find(".ivThumbTitle").text(q.title),z.find(".ivThumbDuration").text(q.durationTimestamp);H.find("#ivLarge360").empty();wa=0;Ja=Fa=!1;Ea=Q.airyConfig;La=!1;Ua()}}}function da(a){var d=Q.colorToAsin[a],e={},f=500;if(d&&d.asin){e.params={asin:d.asin};var k="360"+d.asin,l=Date.now();e.success=
function(b){N("dppc_asyncRequestTime360",Date.now()-l);b&&c.isDefined(b.spin360.spin360Model)?(c.ajaxState(k,"success"),Q.spin360ColorData[a]=b.spin360.spin360Model,a===sa.getCurrentItem().color&&(fa=Q.spin360ColorData[a],R())):e.error()};e.error=function(){g.postCountMetric("dppc_asyncFailed360");N("dppc_asyncRequestTime360",Date.now()-l);f*=2;16E3>=f?setTimeout(function(){l=Date.now();b.load("/gp/product/features/apparel-main-image/360.html",e)},f):c.ajaxState(k,"fail")};c.ajaxState(k)&&"fail"!==
c.ajaxState(k)||(b.load("/gp/product/features/apparel-main-image/360.html",e),c.ajaxState(k,"sent"))}}function ca(){return c.isDefined(Q.spin360ConfigEnabled)&&Q.spin360ConfigEnabled}var X,Q,sa,ha,qa,H,ua,ra,ba,E,ga,na,G,V,ia,Ea,fa,Pa,ta,oa,Aa,ya,Sa,Ga,Xa=!1,Fa=!1,Ja=!1,xa=0,Ia=0,va=0,za=0,Ha=!1,Ma=!1,wa=0,Ra,Oa=navigator.userAgent.match(/msie|trident/i),La=!0,Da=!1,pa=!1,Qa={},Ba={},Wa,Ca,Ua=f.once(function(){w();aa();la();f.on("a:popover:afterUpdatePosition:immersiveView",u);f.on("a:popover:afterShow:immersiveView",
v);f.on("a:popover:afterHide:immersiveView",ja);q()});return function(a,b,d,l){X=this;Q=a;sa=b;n.refToModel=sa;ha=l;ca()&&(Q.spin360ColorData[Q.landingAsinColor]=Q.spin360ColorData[Q.defaultColor],Q.spin360ColorEnabled[Q.landingAsinColor]=Q.spin360ColorEnabled[Q.defaultColor]);c.isDefined(Q.staticImages.icon360)&&e("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",k.addStyleCodeToURL(Q.staticImages.icon360,"_FMpng_RI_"));X.render=function(a,b,d,e,k,l){La=!0;ca()&&Q.spin360ColorEnabled[a]&&
!c.isDefined(Q.spin360ColorData[a])&&(Q.spin360ColorData[a]={},da(a));c.isImmersiveViewEnabled(Q,sa.getCurrentItem().color)&&ca()&&Q.spin360ColorEnabled[a]&&(b===Q.maxAlts&&(a=e.find(".item.imageThumbnail"),d=e.find(".item.videoThumbnail"),c.isDefined(d)&&1<d.length?d.last().remove():a.last().remove(),b--),a=e.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),f.declarative.create(a,"button-360-click"),e.append(a),b++,g.postCountMetric("dppc_display360"));
return b};X.update=function(a){};ha.register("imageClick",ka);ha.register("button360Click",ka)}});m.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(f,a,d,e,c,b,g,n,l,k){function m(){var a=w.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),b=a.find(".a-popover-inner"),a=a.height()-k.getDimension(b,
"padding-top")-k.getDimension(b,"padding-bottom");e("#iv-tab-view-container").css("height",a);y=e("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==e(this).css("display")}).length;1<y?(e("#iv-tab-view-container ul.iv-tab-views li").parent().show(),b=e("#iv-tab-view-container ul.iv-tab-views li").parent().height(),a-=b):e("#iv-tab-view-container ul.iv-tab-views li").parent().hide();e("#iv-tab-view-container .iv-tab-content").css("height",a);f.trigger("dp:image-block:immersive-view:resize")}
function q(){f.trigger("dp:image-block:immersive-view:reset")}function p(b){if(c.isImmersiveViewEnabled(u,w.getCurrentItem().color)){n.isEnabled&&l.logImmersiveViewRequestServed(n);g.postCountMetric("dppc_immersiveViewOpened");c.isDefined(b)&&("button-360-click"===b.action?e("#iv360TabHeading").click():"videoIngressClick"===b.action?(F=b.clickTimeStamp,e("#ivVideosTabHeading").click()):e("#ivImagesTabHeading").click());var d=w.getImmersiveViewModalInstance();if(c.isDefined(d))d.show();else{b=e("#auiImmersiveViewDiv");
var d=Math.min(Math.max(e(h).height()-150,540),1080),k=Math.min(Math.max(e(h).width()-75,990),1980),d=a.create(b,{name:"immersiveView",activate:"onclick",width:k,height:d,popoverLabel:"ImmersiveView",hideHeader:!0});w.setImmersiveViewModalInstance(d);b.click()}C&&(C=!1,x(),f.trigger("dp:image-block:immersive-view:init"))}}var P,u,w,t,C=!0,y=0,F,x=f.once(function(){f.on("a:popover:afterUpdatePosition:immersiveView",m);f.on("a:popover:afterShow:immersiveView",m);f.on("a:popover:afterHide:immersiveView",
q)}),D=f.once(function(){var a=e("#iv-tab-view-container ul.iv-tab-views li");a.bind("click",function(b){var c=a.filter(".iv-active");c.attr("id")!==e(this).attr("id")&&f.trigger("dp:ivTabs:"+c.find("a").attr("data-iv-tab-view")+":deselect",b);a.removeClass("iv-active");e(this).addClass("iv-active");e("#iv-tab-view-container .iv-tab-content").hide();c=e(this).find("a").attr("data-iv-tab-view");e("#"+c).show();"ivVideosTab"===c&&(b.clickTimeStamp=F||b.timeStamp);f.trigger("dp:ivTabs:"+c+":select",
b);g.postCountMetric("dppc_"+c);return!1})});return function(a,b,d,e){P=this;u=a;w=b;n.refToModel=w;t=e;P.render=function(a,b,c,d,e,f){g.postCountMetric("dpcc_altThumbs_"+b);C=!0};P.update=function(a){};P.getTitle=function(){};P.getVariationSelectionInfo=function(){};D();t.register("imageClick",p);t.register("button360Click",p);c.productReelDarkIngressEnabled(u)&&t.register("videoIngressClick",p)}});m.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(f,a,d){return{load:function(a,
c){c=c||{};c.timeout=c.timeout||4E3;f.ajax(a,c)}}});m.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric").register("imageBlockUtils",function(f,a,d,e,c,b,g,n){function l(a){return null!==a&&"undefined"!==typeof a}function k(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[1],10);d>c&&(c=d)});return c}function m(b){var c=0;a.each(b,function(a,b){var d=parseInt(b[0],10);d>c&&(c=d)});return c}function q(a,b,c){b=b.width();
if(c.naturalMainImageSize)return b;a=k(a);0<a&&(b=Math.min(b,a));return b}function p(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=m(a);0<a&&(b=Math.min(b,a));return b}function P(b){var c;a.each(b,function(a,b){l(c)||(c=b[1]/b[0])});return c||1}function u(a,b,c){b.fadeTo(500,0,function(){t(a,c);b.fadeTo(500,1)})}function w(a){a&&a.toggle()}function t(b,c){var d=c.find("img");l(d[b])&&a(d[b]).click()}function C(a,b){N[a]=b?b:N[a];return N[a]}function y(b,c,d){d=d||I;d=d.colorImages;if(1>
d.length||!l(d[b])||!l(c))return-1;var e=-1;a.each(d[b],function(a,b){b.variant===c&&(e=a)});return e}function F(b,c,d){d=d||I;d=d.colorImages;return!(l(d)&&l(d[b])&&l(d[b][c])&&l(d[b][c].main))||1>a.map(d[b][c].main,function(a,b){return b}).length?-1:d[b][c]}function x(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}function D(a){return a.tabbedImmersiveViewTreatment&&"C"!==a.tabbedImmersiveViewTreatment}function v(b,c){var d;if(d=
b.useIV)d=b.colorImages&&b.colorImages[c]&&0<b.colorImages[c].length?!0:!1;g.isEnabled&&(g.IVApplicaple=d,n.logImmersiveViewApplicability(a,g));return d}var r,J,I=a.extend(!0,{},c,b),N={};return{isDefined:l,isUndefinedOrEmpty:function(a){return l(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return l(a)?"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:P,getMaxHeightOfMainImage:p,getMaxWidthOfMainImage:q,
getMaxDimensionsOfMainImage:function(a,b,c){var d=p(a,b,c);b=q(a,b,c);a=P(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);a=0;if(l(d)){a=d.offsetWidth/b;a=Math.min(a,c);var e;b=I.mainImageHeightPartitions;c=I.mainImageMaxSizes;if(l(c)&&l(b)){for(var g=0,f=h.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<b.length;d++)f>b[d]&&(g=d+1);c.length>=g&&(e=c[g])}l(e)&&(a=Math.min(e[1],a))}return a},getColorFromState:function(b,
c){if(b){c=c||I;var d="";a.each(c.visualDimensions,function(a,c){b[c]&&(d+=" "+b[c])});return d&&d.substring(1)}},createThumbnail:function(a,b,c,d){var e=c.find(".template").clone().removeClass("template").addClass("item"),g=document.createElement("img");g.src=b;e.find(".placeHolder").replaceWith(g);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&e.addClass("heroImageThumbnail");l(d)&&e.addClass(d);f.declarative.create(e,"thumb-action",a);c.append(e)},selectGivenThumbnail:function(a,
b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(b,c,g,f,k,l,h,n){var m=a.extend({},g.foresterMetadataParams);null!==f&&(m.method+="."+f);var q=[];c.disabledViewIds&&(q=c.disabledViewIds);return d.embed({parentElement:b[0],streamingUrls:c.url,contentId:c.mediaObjectId,contentMinAge:Number(c.minimumAge||"")||0,contentTitle:c.title,swfUrl:g.swfUrl,
foresterMetadataParams:m,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:c.slateUrl,postMediaSlate:c.slateUrl},videoAds:g.videoAds,bindings:{play:function(){"ImmersiveView"===f?r||(r=!0,e.postCountMetric("dppc_chromefulVideoPlayedIV")):J||(J=!0,e.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(a,b,c){k&&(u(0,l,n),w(h))}}],disabledViewIds:q})},loadMediaIntoAiry:function(a,b,c){a&&a.getMediaSourceInfo()!==
b.url&&a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}})},showUnavailable:function(b){b&&(a("#imageBlock .unvailableVariation").html(b),a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:u,toggleVideoCaption:w,selectThumbnail:t,spinner:function(b,c){var d=a("#imageBlock .a-spinner").parent();
0===d.length&&(d=a("<div></div>").append(a("<span></span>").addClass("a-spinner").addClass("a-spinner-medium")),b.append(d),d.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?d.show():d.hide();return d},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+
a},ajaxState:C,getIndexForVariant:y,getImageHash:F,lazyLoadingRequired:function(a,b,c){b=Math.max(y(a.color,b.getCurrentItem().variant,c),0);b=-1!==F(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==C(a);return!c.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:x,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();x(c,16,9,b)},d||0)},productReelExperimentEnabled:D,
productReelDarkIngressEnabled:function(a){return D(a)&&"T2"===a.tabbedImmersiveViewTreatment},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!l(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return l(a)&&l(a[b])&&l(a[b].url)?a[b]:-1},isImmersiveViewEnabled:v,playVideoInImmersiveView:function(a,b){return v(a,b)&&D(a)}}});m.when("A","jQuery","imageBlockUtils",
"ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(f,a,d,e,c){function b(b,c,g,f){if(!d.isjQueryObjDefined(b.find(".a-button-selected"))){var k=w.getCurrentItem();if(!f||"chromeless-video"!==k.type||!u.autoplayVideo){f=0;if("hero-image"===k.type){f=h(k.color,k.variant);if(-1===f)return;f=-1!==f?f:0}var l=c+f;l>=g&&(f=0,l=c);c=e.getHeroImageHash(u,k.color,f);-1!==c&&(t.dispatch("updateModel",{data:{index:f,thumbnailIndex:l,variant:c.variant,type:"hero-image"}}),c=b.find(".item").get(l),
d.selectGivenThumbnail(a(c),b))}}}function g(c,e,g){if("hero-video"===w.getCurrentItem().type)return c;e=u.heroImage&&u.heroImage[e];var f=c;d.isDefined(e)&&(a.each(e,function(a,b){c<u.maxAlts&&(d.createThumbnail({type:"hero-image",index:a,thumbnailIndex:c,variant:b.variant},b.thumb,C,"imageThumbnail"),c++)}),b(C,f,c,g));return c}function h(b,c){var e=u.heroImage;if(1>e.length||!d.isDefined(e[b])||!d.isDefined(c))return-1;var g=-1;a.each(e[b],function(a,b){b.variant===c&&(g=a)});return g}function l(){if(y.length&&
u.repositionHeroImage){var a=e.getHeroDimParams(u,w.getCurrentItem()),b;d.isDefined(a)&&(b=d.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",y.css({"background-position":b,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function k(a,b,c,g){if(y.length&&a&&b){if("function"===typeof c||g){var f=new Image;f.onload=g?function(){y.css("background-image",'url("'+a+'")')}:c;f.src=a}c=b[1];var f=b[0],k;g||
y.css({"background-image":'url("'+a+'")'});u.repositionHeroImage&&(b=e.getHeroDimParams(u,w.getCurrentItem(),b),d.isDefined(b)&&(c=b.width,f=b.height,k=d.isDefined(b.xPos)?b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px "));y.css({"background-position":k,"background-size":c+"px "+f+"px ","max-width":c+"px ","min-height":f+"px ",filter:"","-ms-filter":""})}}function m(b,c,d,g){b=e.getHeroImageHash(u,b,c);if(-1===b)return-1;c=a.map(b.main,function(a,b){return b})[0];k(c,b.main[c],d,g)}function q(a,b,
c){if("hero-image"!==a.type)return-1;var d=h(a.color,w.getCurrentItem().variant),d=-1!==d?d:0;if(-1===e.getHeroImageHash(u,a.color,d))return-1;var g=w.getCurrentItem();a.thumbnailIndex=g.thumbnailIndex;a.type=g.type;a.variant=g.variant;a.index=d;p(a,b,c)}function p(a,b,c){var d=e.getHeroImageHash(u,a.color,a.index),g;g=a&&F&&f.equals(a,F)?!0:!1;F||(F=a);if(!g&&a||b)m(a.color,a.index,b,c),F=a;y.removeClass("hide-background");f.trigger("dp:image-block:update",d)}var P,u,w,t,C,y,F={};return function(b,
c,e,f){P=this;u=b;w=c;t=f;u.heroImage[u.landingAsinColor]=u.heroImage[u.defaultColor];P.render=function(b,c,d,e,f,k,l){C=e;y=a("#heroImage");b=g(c,b,k);q(w.getCurrentItem(),l,k);return b};P.update=function(a){var b=a.data;"ingress"!==b.type&&y.addClass("hide-background");"swatchHover"===a.type?a.captured||(b.type=w.getCurrentItem().type,-1!==q(b)&&(a.captured=!0)):"hero-image"===b.type&&(p(b),"click"!==a.type&&u.usePeekHover||d.selectGivenThumbnail(a.$declarativeParent,C))};t.register("resize",l)}});
m.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(f,a,d,e,c){var b,g,h,l;return function(a,c,e,m){b=this;g=a;h=m;b.render=function(a,c,e,k,h,n,m){l=k;b=this;e=g.maxAlts;k=c;h=g.colorImages[a]?g.colorImages[a].length:0;h+=d.getVideosCount(a,g);a=g.heroImage[a];n=0;a&&(n=a.length);a=h+n;a>e&&(e=a-e,a=l.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),
e+="+",k={type:"ingress",index:0,thumbnailIndex:c,variant:""},a.find("#altIngressText").append(e),f.declarative.create(a,"thumb-action",k),l.append(a),k=c++);return k};b.update=function(a){"ingress"===a.data.type&&"click"===a.type&&h.dispatch("imageClick",a)}}});m.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(f,a,d){return function(a,c,b){this.getImageHash=function(c){var f=b.getCurrentItem();c=d.getIndexForVariant(f.color,c||"MAIN",a);return d.getImageHash(f.color,
c,a)};this.onImageUpdateForTwister=function(a){c.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});m.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(f,a,d){function e(a,b){var c;if(b.repositionHeroImage){c=a[1];var d=a[0];if(768>=(h.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))c*=.7,d*=.7;else{var e=((h.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-
1024)/256,e=Math.max(Math.min(e,1),0);c*=.7+.3*e;d*=.7+.3*e}c=[c,d]}return c}function c(a,b,c){var e;if(c.repositionHeroImage){var f=h.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;c=c.heroFocalPoint;if(d.isDefined(c)){e=Math.max((f-Math.min(1500,a))/2,0);var m=Math.max((f-a)/2,0);e-=m;f=Math.max(Math.min(f,1500),1024);e=e+(f-420-23)/2-a/b[1]*c}}return e}function b(b,c,e){b=b.heroImage;return!(d.isDefined(b)&&d.isDefined(b[c])&&d.isDefined(b[c][e])&&d.isDefined(b[c][e].main))||
1>a.map(b[c][e].main,function(a,b){return b}).length?-1:b[c][e]}return{getHeroImageHash:b,getHeroDimParams:function(g,f,l){if(g.repositionHeroImage){if(!d.isDefined(l)){l=b(g,f.color,f.index);if(-1===l)return;f=a.map(l.main,function(a,b){return b})[0];l=l.main[f]}f=e(l,g);g=c(f[0],l,g);return{height:f[1],width:f[0],xPos:g,yPos:75}}}}});m.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(f,a,d,e,c,
b,g){function n(a,b){var c=f.copy(a);if(g.isDefined(a)&&a.length>b){try{for(var d=-1,e=0;e<a.length;e++){var l=a.charAt(e);if(" "===l||"."===l||"?"===l||";"===l||","===l||":"===l)d=e;if(e===b-4){c=a.substring(0,-1===d?e:d);break}}}catch(h){c=a.substring(0,b-3)}c+="..."}return c}function l(a,b){var c=a.lastIndexOf(".");return a="_"===a.charAt(c-1)?a.substring(0,c-1)+b+a.substring(c):a.substring(0,c)+"."+b+a.substring(c)}return{getDimension:function(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?
0:c},attachTabSelectHandler:function(a,b){f.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){f.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){f.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){f.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){f.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+
b).show()},addStyleCodeToURL:l,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var c="_AA50_";b&&(c+="FMpng_RI_");return l(a,c)},populateVariationSelection:function(b){if(g.isDefined(h.DetailPage)&&g.isDefined(h.DetailPage.StateController)){b.empty();var c=h.DetailPage.StateController.getState(),d=c.variation_label_order,
e;for(e in d)if(d.hasOwnProperty(e)){var f=d[e],l=c.selected_variations[f],f=c.variation_display_labels[f];l&&a("<div/>").addClass("ivVariations").text(f+":"+l).appendTo(b)}}},populateTitle:function(a,b,c){a.attr("title",c.title);a.text(n(c.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)},logError:function(a,b,c,d){h.ueLogError&&h.ueLogError(d,{logLevel:a,attribution:b,message:c})}}});m.when("A","a-modal","a-tooltip",
"jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(f,a,d,e,c,b,g,h){function l(){var a=v.getCurrentItem().color;I=D.colorImages[a];J=D.heroImage[a];N=A=0;c.isDefined(J)&&(N=J.length);c.isDefined(I)&&(A=I.length)}function k(a){return a.hiRes||a.large||a.main[a.main.length-1]}function m(){var a=r.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=
d.width(),g=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(g=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,g=0===g?1:g,f=Math.min(b/e,c/g),k=g*f,l=e*f;1>f?(M?a.css("cursor","url('"+D.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),L=!0):L=!1;e=Math.min(l,e);g=Math.min(k-20,g);d.css({"margin-top":(c-g)/2,"margin-left":(b-e)/2,height:g,width:e});a.css("visibility","visible");
R=!1}function q(a){var b=r.find("#ivLargeImage");b.css("visibility","hidden");b.empty();h.animateStageIn(b);b.append(a);m()}function p(a){r.find("#ivLargeImage").css("display","none");r.find("#ivLargeImage").css("display","block");var b;"hero-image"===a?c.isDefined(J)&&(b=k(J[K.index])):c.isDefined(I)&&(b=k(I[K.index]));if(c.isDefined(b)){r.find(".fullscreen").remove();var d=e("<img>").attr("src",b).addClass("fullscreen"),g=r.find("#ivLargeImage");h.animateStageOut(g,function(){d.load(function(){q(d)});
if(d[0].complete)q(d);else{g.empty();var a=(g.height()-104)/2,b=(g.width()-80)/2;e("<img>").attr("src",D.staticImages.spinner).css({position:"relative",top:a+"px",left:b+"px"}).appendTo(g)}})}}function P(a){r.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?K.type="hero-image":K.type="image";K.index=a.attr("id").split("_")[1];p(K.type);g.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(K.index,10)+1)+"_"+(N+A))}function u(){r.delegate(".ivThumb","click",function(){var a=
e(this);P(a)})}function w(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function t(a){var b=T.top-(a.pageY-S[1])*W;a=w(T.left-(a.pageX-S[0])*W,U.left);b=w(b,U.top);r.find(".fullscreen").css({left:a,top:b})}function C(){r.delegate("#ivLargeImage","click",function(a){if(R)m();else if(L){r.find(".fullscreen").removeAttr("style");if(L){var b=r.find("#ivLargeImage"),c=b.find(".fullscreen");M?b.css("cursor","url('"+D.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),
b.css("cursor","zoom-out"));R=!0;var d=r.find("#ivLargeImage");U.left=d.width()-c.width();U.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;S=[b.offset().left+e,b.offset().top+d];T.top=d-c.height()/2;T.left=e-c.width()/2;c.css({position:"relative",left:T.left,top:T.top});W=Math.max(c.height()/b.height(),c.width()/b.width())}t(a);g.postCountMetric("dpcc_iv_largeImageCLick")}});r.delegate("#ivLargeImage","mousemove",function(a){R&&t(a)})}function y(){r.find("#ivLargeImage").empty()}function F(a){if(B){r=
e("#ivMain");l();K=v.getCurrentItem();h.populateTitle(r.find("#ivTitle"),160,D);h.populateVariationSelection(r.find("#ivVariationSelection"));a=r.find("#ivThumbs");a.find(".ivRow").not(".placeholder").remove();for(var b=N+A,d=0,g=0;d<b;)for(var f=a.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(a),k=0;4>k&&d<b;k++,d++,g++)if(g<N){var m=J[d].thumb,q=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+d).appendTo(f);
q.find(".ivThumbImage").css("background",'url("'+h.getResizedThumbnailURL(m)+'") center no-repeat')}else g>=N&&g<A+N&&(m=I[d-N].thumb,q=a.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(d-N)).appendTo(f),q.find(".ivThumbImage").css("background",'url("'+h.getResizedThumbnailURL(m)+'") center no-repeat'));Y();B=!1}a=e("#ivImagesTab").height();r.css("height",a);b=r.find("#ivTitle").outerHeight(!0);d=r.find("#ivVariationSelection").outerHeight(!0);g=r.find("#ivThumbs");
f=h.getDimension(g,"margin-top")+h.getDimension(g,"margin-bottom");g.css("height",a-b-d-f);r.find("#ivLargeImage").css("height",a);a=r.find("#ivStage");b=r[0]&&r[0].getBoundingClientRect&&Math.floor(r[0].getBoundingClientRect().width)||r.width();a.css("width",b-h.getDimension(r,"padding-left")-h.getDimension(r,"padding-right")-r.find("#ivThumbColumn").width()-h.getDimension(a,"margin-left")-h.getDimension(a,"margin-right"));K=v.getCurrentItem();a="hero-image"===K.type?r.find("#ivHeroImage_"+K.index):
"image"===K.type?r.find("#ivImage_"+K.index):c.isDefined(J)?r.find("#ivHeroImage_"+K.index):r.find("#ivImage_"+K.index);c.isjQueryObjDefined(a)||(a=r.find("#ivImage_0"));P(a)}var x,D,v,r,J,I,N,A,K,M=navigator.userAgent.match(/msie|trident/i),B=!0,R=!1,L=!1,U={},T={},W,S,B=!0,Y=f.once(function(){u();C();h.attachImmersiveViewResizeHandler(F);h.attachTabDeselectHandler("ivImagesTab",y)});return function(a,b,c,d){x=this;D=a;v=b;x.render=function(a,b,c,d,g,f){B=!0;l();0===N+A?h.hideTabHeading("ivImagesTabHeading"):
h.unhideTabHeading("ivImagesTabHeading");1===N+A?e("#ivThumbs").hide():e("#ivThumbs").show()};x.update=function(a){};h.attachTabSelectHandler("ivImagesTab",F)}});m.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(f,a,d,e,c,b,g,n,l,k){function m(){v.delegate(".ivThumb","click",function(){var a=e(this);v.find(".ivThumb").removeClass("selected");
a.addClass("selected");a.hasClass("ivThumbVideo")&&(r.type="chromeful-video",r.index=a.attr("id").split("_")[1])})}function q(){var a=e("#ivVideosTab").height();v.css("height",a);var b=v.find(".vse-video-block");I=a-n.getDimension(v,"padding-top")-n.getDimension(v,"padding-bottom");b.css({"max-height":a,overflow:"hidden"});if(R)v.css({"max-width":Math.floor(1.77*I)});else{var a=v.find(".vse-airy-container"),b=v.find(".vse-ib-metadata"),c=Math.floor(I-n.getDimension(b,"height")),d=Math.floor(1.77*
c);a.css({"max-height":c,"max-width":d});b.css("max-width",d);L&&(a=v.find(".vse-vertical-scroll"),b=n.getDimension(a,"margin-top")+n.getDimension(a,"margin-bottom"),a.css("max-height",I-b))}}function p(){J&&J.pause();J&&J.pause();U=!1;M=!0;K=null}function P(){J&&J.pause()}function u(a){K=a.clickTimeStamp;B&&(k.get(f,"#ivVideoBlock",D,Y,Z),v=e("#ivVideoBlock"),x.getCurrentItem(),r=x.getCurrentItem(),T());q();U=!0;B=!1;C()}function w(a){B&&(v=e("#ivVideoBlock"),x.getCurrentItem(),r=x.getCurrentItem(),
T());U&&C();q()}function t(a){J=a.airy;U&&J.play({isAsync:!0})}function C(){if(J&&(J.play({isAsync:!0,eventTimestamp:K||(new Date).getTime()}),g.postCountMetric("dpcc_vse_videoBlock_video_played"),M)){var a=h.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,g.postTimeMetric("dpcc_vse_vitff",a),M=!1)}}var y,F,x,D,v,r,J,I,N,A,K,M=!0,B=!0,R=!1,L=!1,U=!1,T=f.once(function(){m();n.attachImmersiveViewResizeHandler(w);n.attachTabDeselectHandler("ivVideosTab",P);n.attachImmersiveViewResetHandler(p)}),
W=function(a,b,d){e("#ivVideoBlockSpinner").addClass("aok-hidden");g.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+b.placement);a=x.getCurrentItem().color;a=c.getVideoHash(a,0,F);J||(J=c.createAiryInstanceForChromeful(e("#ivVideoBlock"),a,F.airyConfig,"ImmersiveView"));R=!0;e("#ivVideoBlock").css({"max-width":1.77*I,margin:"0 auto"});U&&R&&J.play({isAsync:!0})},S=function(a,b,c){B||k.get(a,"#ivVideoBlock",D,Y,Z);e("#ivVideoBlockSpinner").addClass("aok-hidden")},Y=function(a,b,c){L=!0;q();
U&&C()},Z=function(a,b,c){g.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,b,d,e){y=this;F=a;x=b;y.render=function(a,b,d,e,g,k){a=x.getCurrentItem().color;b=c.getVideoHash(a,0,F);N=F.colorToAsin[a]&&F.colorToAsin[a].asin;N=c.isDefined(N)?N:F.mediaAsin;A=null!==F.vseVideoDataSourceTreatment&&"T1"===F.vseVideoDataSourceTreatment?"ASIN":"physicalID";B=!0;-1===b?n.hideTabHeading("ivVideosTabHeading"):(n.unhideTabHeading("ivVideosTabHeading"),
D={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:b.marketPlaceID,locale:b.languageCode,product:{contentID:N,contentIDType:"ASIN"},video:{contentID:b.mediaObjectId,contentIDType:A,videoURL:b.url,imageURL:b.slateUrl},requestId:F.dpRequestId,metadata:{ProductTitle:F.title}},l.get(f,"#ivVideoBlock",D,S,W))};y.update=function(a){};n.attachTabSelectHandler("ivVideosTab",u);f.on("vseAiry",t)}});m.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader",
"nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(f,a,d,e,c,b,g,h,l){function k(){var a=e("#iv360Tab").height();L.css("height",a);var b=L.find("#ivTitle360").outerHeight(!0),c=L.find("#ivVariationSelection360").outerHeight(!0),d=L.find("#ivThumbs360"),g=l.getDimension(d,"margin-top")+l.getDimension(d,"margin-bottom");d.css("height",a-b-c-g);a=L.find("#ivStage360");b=L[0]&&L[0].getBoundingClientRect&&Math.floor(L[0].getBoundingClientRect().width)||
L.width();a.css("width",b-l.getDimension(L,"padding-left")-l.getDimension(L,"padding-right")-L.find("#ivThumbColumn360").width()-l.getDimension(a,"margin-left")-l.getDimension(a,"margin-right"))}function m(){u();var a=L.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});l.animateStageIn(a)},200);q()}function q(){if(0<Q){var a=L.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function O(a,b){if(Q<a.length){var c=e("<img />").css({display:"block",
width:6*T+"px",height:W+"px"});c.hide();b.append(c);c.get(0).onload=function(){b.closest(document.documentElement).length&&(Q++,1===Q&&(q(),0<ka&&(g.time("dppc_loadTime360",Date.now()-ka,B.mediaAsin),h.postTimeMetric("dppc_loadTime360",Date.now()-ka))),0<da&&(g.time("dppc_perSpriteloadTime360",Date.now()-da,B.mediaAsin),h.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-da)),L.find("#iv360Spinner").hide(),c.show(),ma=5*U.imageLocations[Math.floor(la/U.imageLocations[0].length)][la%U.imageLocations[0].length],
O(a,b))};c.attr("src",a[Q].replace(/(\._SP)\d+(,)\d+/,"$1"+Y+"$2"+S));da=Date.now()}}function P(a){if(c.isDefined(U.spriteWidthSizes)&&0<U.spriteWidthSizes.length){var b=U.spriteWidthSizes,d=b.length,e=b[0],g=b[d-1];if(a<=e)return e;if(a>g)return g;for(e=0;e<d;e++)if(a>b[e]&&a<=b[e+1])return b[e+1]}else return a}function u(){var a=L.find("#ivLarge360");a.children("#image-360-sprites").length||(a.append("<div id='image-360-sprites'></div>"),a.css({"margin-left":0,"margin-top":0,width:a.parent().width(),
height:a.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),e("<img>").attr("src",B.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(a),ja=!0,w())}function w(){if(c.isDefined(U.spriteURLs)&&c.isDefined(L)&&ja&&!ea){var a=L.find("#ivLarge360"),b=e("<div>").addClass("iv360Hint").css({position:"absolute",
width:"100%",bottom:0,opacity:0,display:"block"});c.isDefined(U.staticImages.hint360)&&e("<img>").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",U.staticImages.hint360).appendTo(b);e("<div>").css({"text-align":"center"}).text(B.staticStrings.dragToSpin).appendTo(b);b.appendTo(a);var b=U.imageWidth,d=U.imageHeight,g=a.parent().width(),f=a.parent().height(),k=0,l=0;b/d>g/f?(Y=P(g),S=Math.round(d/b*Y),T=Math.ceil(g),W=Math.ceil(S/Y*g),l=(f-W)/2):(S=P(f),Y=Math.round(b/d*
S),W=Math.ceil(f),T=Math.ceil(Y/S*f),k=(g-T)/2);a.css({"margin-left":k,"margin-top":l,width:T+"px",height:W+"px",overflow:"hidden",position:"relative"});a.children("#image-360-sprites").css("width",6*T+"px");O(U.spriteURLs,L.find("#image-360-sprites"),0);b=L.find("#ivLarge360");b.bind("mousedown",F);b.bind("touchstart",t);b.bind("touchmove",C);b.bind("touchend",y);e(document).bind("mousemove",x);e(document).bind("mouseup",D);c.isDefined(B.staticImages.grab)&&a.css("cursor","url('"+B.staticImages.grab+
"'), auto");ea=!0}}function t(a){X=!0;aa=a.originalEvent.targetTouches[0].clientX}function C(a){X&&(v(a.originalEvent.targetTouches[0].clientX-aa),aa=a.originalEvent.targetTouches[0].clientX)}function y(a){X&&(X=!1)}function F(a){ca=!0;Z=a.originalEvent.clientX;c.isDefined(B.staticImages.grabbing)&&(a=L.find("#ivLarge360"),a.css("cursor","url('"+B.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+B.staticImages.grabbing+"'), auto"));return!1}function x(a){ca&&
(v(a.originalEvent.clientX-Z),Z=a.originalEvent.clientX)}function D(a){ca&&(ca=!1,c.isDefined(B.staticImages.grab)&&(a=L.find("#ivLarge360"),a.css("cursor","url('"+B.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function v(a){ma-=a/T*180;ha&&(g.count("dppc_360dragToSpin",B.mediaAsin),h.postCountMetric("dppc_360dragToSpin"));ha=!1;for(a=ma;0>a;)a+=360;for(;360<a;)a-=360;ma=a;var b;a=360;for(var d=0;d<Q;d++)for(var e=0;e<U.imageLocations[d].length;e++){var f=
Math.abs(ma-5*U.imageLocations[d][e]);f<a&&(a=f,b=d*U.imageLocations[0].length+e)}b!==la&&(a=Math.floor(b/U.imageLocations[0].length),a!==Math.floor(la/U.imageLocations[0].length)&&(c.isDefined(sa)||(sa=document.createElement("canvas").getContext("2d")),d=L.find("#image-360-sprites").children(),sa.drawImage(d[a],0,0)),a=L.find(".iv360Hint").not(".iv360HintFaded"),c.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));la=b;a=b%U.imageLocations[0].length*-1*T;b=-1*Math.floor(b/U.imageLocations[0].length)*
W;d=L.find("#ivLarge360").children("#image-360-sprites");d.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");d.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function r(){if(H){L=e("#ivMain360");var a=R.getCurrentItem().color;I()&&N(a);U=I()?B.spin360ColorData[a]:p;l.populateTitle(L.find("#ivTitle360"),160,B);l.populateVariationSelection(L.find("#ivVariationSelection360"));L.find("#ivLarge360").empty();Q=0;ea=ja=!1;la=ma=0;ua();H=!1}0!==e("#iv360Tab").height()&&(l.detachImmersiveViewResizeHandler(r),
k(),m(),ka=Date.now(),qa=ha=!0,g.count("dppc_click360",B.mediaAsin),h.postCountMetric("dppc_click360"))}function J(a){var d=B.colorToAsin[a],e={},f=500;if(!d||!d.asin)if(a===B.defaultColor)d={asin:B.winningAsin};else return;e.params={asin:d.asin};var k="360"+d.asin,l=Date.now();e.success=function(b){g.time("dppc_asyncRequestTime360",Date.now()-l,B.mediaAsin);h.postTimeMetric("dppc_asyncRequestTime360",Date.now()-l);b&&c.isDefined(b.spin360.spin360Model)?(c.ajaxState(k,"success"),B.spin360ColorData[a]=
b.spin360.spin360Model,a===R.getCurrentItem().color&&(U=B.spin360ColorData[a],w())):e.error()};e.error=function(){g.count("dppc_asyncFailed360",B.mediaAsin);h.postCountMetric("dppc_asyncFailed360");g.time("dppc_asyncRequestTime360",Date.now()-l,B.mediaAsin);h.postTimeMetric("dppc_asyncRequestTime360",Date.now()-l);f*=2;16E3>=f?setTimeout(function(){l=Date.now();b.load("/gp/product/features/apparel-main-image/360.html",e)},f):c.ajaxState(k,"fail")};c.ajaxState(k)&&"fail"!==c.ajaxState(k)||(b.load("/gp/product/features/apparel-main-image/360.html",
e),c.ajaxState(k,"sent"))}function I(){return c.isDefined(B.spin360ConfigEnabled)&&B.spin360ConfigEnabled}function N(a){return c.isDefinedAndNotEmpty(B.spin360ColorData[a])?!0:B.spin360ColorEnabled.hasOwnProperty(a)?B.landingAsinColor===B.defaultColor?A():B.spin360ColorEnabled[a]:A()}function A(){return c.isDefined(B.spin360LazyLoadEnabled)&&B.spin360LazyLoadEnabled}function K(){qa&&(g.time("dppc_duration360",Date.now()-ka,B.mediaAsin),h.postTimeMetric("dppc_duration360",Date.now()-ka),qa=!1)}var M,
B,R,L,U,T,W,S,Y,Z,aa,ja=!1,ea=!1,ma=0,la=0,ka=0,da=0,ca=!1,X=!1,Q=0,sa,ha=!0,qa=!1,H=!0,ua=f.once(function(){l.attachImmersiveViewResizeHandler(r);l.attachImmersiveViewResizeHandler(k);l.attachImmersiveViewResetHandler(K);l.attachTabDeselectHandler("iv360Tab",K)});return function(a,b,d,k){M=this;B=a;R=b;I()&&!A()&&(B.spin360ColorData[B.landingAsinColor]=B.spin360ColorData[B.defaultColor],B.spin360ColorEnabled[B.landingAsinColor]=B.spin360ColorEnabled[B.defaultColor]);c.isDefined(B.staticImages.icon360)&&
e("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",l.addStyleCodeToURL(B.staticImages.icon360,"_FMpng_RI_"));M.render=function(a,b,d,k,m,q){if(a===B.landingAsinColor||B.spin360ColorEnabled.hasOwnProperty(a))return H=!0,I()&&N(a)?(c.isUndefinedOrEmpty(B.spin360ColorData[a])&&(B.spin360ColorData[a]={},J(a)),e("#ivThumbs360").hide(),l.unhideTabHeading("iv360TabHeading")):l.hideTabHeading("iv360TabHeading"),c.isImmersiveViewEnabled(B,R.getCurrentItem().color)&&I()&&N(a)&&
(b===B.maxAlts&&(a=k.find(".item.imageThumbnail"),d=k.find(".item.videoThumbnail"),c.isDefined(d)&&1<d.length?d.last().remove():a.last().remove(),b--),a=k.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),f.declarative.create(a,"button-360-click"),k.append(a),b++,g.count("dppc_display360",B.mediaAsin),h.postCountMetric("dppc_display360")),b};M.update=function(a){};l.attachTabSelectHandler("iv360Tab",r)}});m.register("nexusLogger360",function(){return{count:function(f,
a){h.ue&&h.ue.event({asin:a,metricName:f,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(f,a,d){h.ue&&h.ue.event({asin:d,metricName:f,metricValue:a},"hit-360","hit360.clientEvent.3")}}});m.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(f,a){try{var d=h.location.host,e={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},c=d.split(".")[1],b=-1===d.indexOf(".proxy.amazon.com")?"/vap/ew/":e[c]!==p?e[c]:"https://www.amazon.com/vap/ew/",
g="vse_lazyLoaderHook:success:",n="vse_lazyLoaderHook:error:",l="vse_preLoaderHook:success:",k="vse_preLoaderHook:error:",z=4E3,q=3}catch(O){a.logError("FATAL","vse_ns_desktop","[Domain] ",O)}m.register("vse_ns_preLoaderHook",function(){function c(d,e){try{var g=d.A,h=d.block,n=d.request,m=d.handleFailure,p=d.handleSuccess,D=g.$;e--;var v=q-e-1,r=g.now();g.ajax(b+"componentbuilder",{params:n,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:n.timeout||z,withCredentials:!0,
success:function(a){var b=g.now()-r;f.postTimeMetric(l,b);f.postCountMetric(l+n.page+":"+n.placement+":"+v);D(h).html(a);p(g,n,a)},error:function(a){f.postCountMetric(k+n.page+":"+n.placement+":"+v);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<e?c(d,e):(f.postCountMetric(k,1),m(g,n,a))}})}catch(J){a.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",J)}}return{get:function(a,b,d,e,g){c({A:a,block:b,request:d,handleFailure:g,handleSuccess:e},q)}}});m.register("vse_ns_lazyLoaderHook",
function(){function c(d,e,k){try{var l=d.A,h=d.context,m=d.handleFailure,p=d.handleSuccess;e.attr("data-configuration");var D=atob(e.attr("data-configuration")),v=JSON.parse(D),r={pageContext:h,configuration:v},J=l.now();k--;var I=q-k-1;l.ajax(b+"subcomponent/"+v.type,{params:r,paramsFormat:"json",method:"post",contentType:"application/json",timeout:h.timeout||z,withCredentials:!0,success:function(a){var b=l.now()-J;f.postTimeMetric(g,b);f.postCountMetric(g+h.page+":"+h.placement+":"+v.type+":"+I);
e.html(a);p(l,r,a)},error:function(a){f.postCountMetric(n+h.page+":"+h.placement+":"+v.type+":"+I);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<k?c(d,e,k):(f.postCountMetric(n,1),m(l,r,a))}})}catch(O){a.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",O)}}return{get:function(a,b,d,e,g){var f=a.$;f(b+" div[data-configuration]").each(function(){c({A:a,context:d,handleFailure:g,handleSuccess:e},f(this),q)})}}})})});